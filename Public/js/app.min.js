//var myApp = angular.module("App", ['ngAnimate', 'ui.bootstrap','ngDialog','ngFileUpload']);
var myApp = angular.module("App", ["ui.bootstrap"]);

// 定义全局变量,工作目录
var workroot = '/osp';

// 员工列表页面控制器

myApp.config(['uibPaginationConfig',function(uibPaginationConfig){
        uibPaginationConfig.previousText="‹";
        uibPaginationConfig.nextText="›";
        uibPaginationConfig.firstText="«";
        uibPaginationConfig.lastText="»";
        uibPaginationConfig.itemsPerPage = 10 ;
}]);

myApp.controller("accountListCtrl",["$scope","$http",function($scope,$http){
    // 搜索参数置空
    $scope.busi_id = '';
    $scope.city = '';
    $scope.order_type = '';
    $scope.begin_date = '';
    $scope.end_date = '';
    $scope.maxSize = 8 ;
    $scope.bigCurrentPage = 1;
    $scope.needCount = 1 ;
    $scope.getDatas=function( status ){
        // -1代表是状态改变的搜索，需要修改count值
        if( status == -1 ){
            $scope.needCount = 1 ;
        }
        $http({
            method:'GET',
            url:workroot + '/StatementOfAccount/datas?busi_id='+$scope.busi_id+'&city='+$scope.city+'&order_type='+$scope.order_type+'&begin_date='+$scope.begin_date+'&end_date='+$scope.end_date+'&needCount='+$scope.needCount+'&p='+$scope.bigCurrentPage,
        }).success(function(ret){
            // 当needCount == 1 的时候， 才需要去查询总数量
            if( $scope.needCount == 1 ){
                $scope.needCount = 0 ;
                $scope.bigTotalItems = ret.count ;
            }
            $scope.lists = ret.data;
            console.log( '------ret------' );
        });
    };
    $scope.getDatas();
}]);



